<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="modal.js">
</head>

<style>
    .box {
        width: 40%;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.2);
        padding: 35px;
        padding-top: 175px;
        border: 2px solid #fff;
        border-radius: 20px/50px;
        background-clip: padding-box;
        text-align: center;
    }

    .button {
        font-size: 1em;
        padding: 10px;
        color: #000000;
        border-radius: 20px/50px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease-out;
    }

    body {
        background-image: url(/HTML/images/skybag_poster3.jpg);
        background-size: cover;
        background-attachment: fixed;
        background-position: center center;
    }

    /* .modal-header {
        background-color:cyan;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
    } */

    #exampleModal>div>div>div.modal-footer>button {
        width: 100%;
    }

    /* #exampleModal>div>div>div.modal-header {
        background-image: url(/HTML/images/skybag_poster3.jpg);
        max-width: 100%;
        max-height: 100%;
        color: #fff;

    } */

    /* #exampleModal > div > div > div.modal-body > form{

} */
</style>

<body>
    <!-- Button trigger modal -->
    <div class="container">
        <div class="row pt-5">


            <div class="box col-6 rows-2 ">


                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    <a class="button" href="#popup1">Login</a>
                </button>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <!-- <h5 class="modal-title" id="exampleModalLabel">Enter your details</h5> -->
                            <button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body ">
                                <div class="row justify-content-center align-items-center h-100">
                                        <div class="card shadow-2-strong card-registration"
                                            style="border-radius: 15px;">
                                            <div class="card-body p-4 p-md-5">
                                                <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Registration Form</h3>
                                                <form>

                                                    <div class="row">
                                                        <div class="col-md-12 mb-4">

                                                            <div class="form-outline">
                                                                <input type="text" id="t2" name="t2"
                                                                    class="form-control form-control-lg border-dark" />
                                                                <label class="form-label" for="t2">First
                                                                    Name</label>
                                                            </div>

                                                        </div>
                                                       
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-md-12 mb-4">

                                                            <h6 class="mb-2 pb-1">Gender: </h6>

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="r1" id="r1"
                                                                    value="option1" checked />
                                                                <label class="form-check-label"
                                                                    for="r1">Female</label>
                                                            </div>

                                                            <div class="form-check form-check-inline ps-5">
                                                                <input class="form-check-input" type="radio"
                                                                    name="r1" id="r1"
                                                                    value="option2" />
                                                                <label class="form-check-label"
                                                                    for="r1">Male</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 mb-4 pb-2">

                                                            <div class="form-outline">
                                                                <input type="email" id="t1" name="t1"
                                                                    class="form-control form-control-lg border-dark" />
                                                                <label class="form-label"
                                                                    for="t1">Email</label>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-6 mb-4 pb-2">

                                                            <div class="form-outline" id="id" name="id">
                                                                <input type="number" id="phoneNumber"
                                                                    class="form-control form-control-lg border-dark" />
                                                                <label class="form-label" for="id">ID</label>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <!-- <div class="row">
                                                        <div class="col-12">

                                                            <select class="select form-control-lg">
                                                                <option value="1" disabled>Choose option</option>
                                                                <option value="2">Subject 1</option>
                                                                <option value="3">Subject 2</option>
                                                                <option value="4">Subject 3</option>
                                                            </select>
                                                            <label class="form-label select-label">Choose option</label>

                                                        </div>
                                                    </div> -->
                                                    <div class="row">
                                                        <div class="col-md-12 mb-4">

                                                            <h6 class="mb-2 pb-1">Status: </h6>

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="r2" id="r2"
                                                                    value="option1" checked />
                                                                <label class="form-check-label"
                                                                    for="r2">Active</label>
                                                            </div>

                                                            <div class="form-check form-check-inline ps-5">
                                                                <input class="form-check-input" type="radio"
                                                                    name="r2" id="r2"
                                                                    value="option2" />
                                                                <label class="form-check-label"
                                                                    for="r2">Inactive</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                </div>
                            
                        </div>
                        <div class="modal-footer">
                            <!-- <button type="button" class="btn btn-secondary" >Close</button> -->
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                                onclick="PostData()">Save Changes</button>
                            <!-- <button type="button" >Save changes</button> -->
                        </div>
                    </div>
                </div>


            </div>




            <div id="table" class="col-6 rows-2" class="table table-hover "></div>
            <div id="output"></div>



        </div>

    </div>


</body>

</html>

<script>
    ShowData();
    function ShowData() {
        const myajax = new XMLHttpRequest();
        myajax.onload = function () {

            if (this.readyState == 4 && this.status == 200)
                document.getElementById("table").innerHTML = showmydata(this.responseText);
            else
                document.getElementById("table").innerHTML = "<h1>Contact Admin</h1>";
        }
        let strurl = "https://gorest.co.in/public/v2/users";
        myajax.open("GET", strurl);
        myajax.setRequestHeader("Content-Type", "application/json");
        myajax.setRequestHeader("Authorization", "Bearer db9c5e94c0dc4a008c72596fcd566826a7afa457b37f87bd281833f264e25e01");
        myajax.send();
    }
    function showmydata(data) {
        const myobj = JSON.parse(data);
        let mystr = "<table border='3' class='table table-bordered table-dark table-stripped'>";
        mystr += "<tr >"
        mystr += "<th>" + "ID" + "</th>";
        mystr += "<th>" + "Name" + "</th>";
        mystr += "<th>" + "Email" + "</th>";
        mystr += "<th>" + "Gender" + "</th>";
        mystr += "<th>" + "Status" + "</th>";
        mystr += "</tr>"
        for (x of myobj) {
            mystr += "<tr>"
            mystr += "<td>" + x.id + "</td>";
            mystr += "<td>" + x.name + "</td>";
            mystr += "<td>" + x.email + "</td>";
            mystr += "<td>" + x.gender + "</td>";
            mystr += "<td>" + x.status + "</td>";
            mystr += "</tr>"
        }
        mystr += "</table>"
        return mystr;
    }
    PostData();
    function PostData() {
        const myajax = new XMLHttpRequest();
        myajax.onload = function () {
            if (this.readyState == 4 && this.status == 200) {
                const a = JSON.parse(this.responseText);
                const b = document.getElementById("t1").value;
                const c = a.data.some((user) => user.email == b);
                if (c) {
                    alert("This email is already taken!")

                }
            }
        }


        let strurl = "https://gorest.co.in/public/v2/users";
        const mypostdata = {
            "id": document.getElementById("id").value,
            "name": document.getElementById("t2").value,
            "email": document.getElementById("t1").value,
            "gender": document.querySelector('input[name="r1"]:checked').value,
            "status": document.querySelector('input[name="r2"]:checked').value
        };
        myajax.open("POST", strurl);
        myajax.setRequestHeader("Content-Type", "application/json");
        myajax.setRequestHeader("Authorization", "Bearer db9c5e94c0dc4a008c72596fcd566826a7afa457b37f87bd281833f264e25e01");
        myajax.send(JSON.stringify(mypostdata));
        ShowData();

    }
</script>

<!-- <form>
    <center>
        id <input type="number" name="id" id="id" placeholder="id"> <br><br>
        name <input type="text" name="t2" id="t2" placeholder="name"><br><br>
        email <input type="email" name="t1" id="t1" placeholder="email"><br><br>
        <div id="altmsg"></div>
        Gender <input type="radio" name="r1" value="Male">Male
        <input type="radio" name="r1" value="Female">Female <br><br>
        status <input type="radio" name="r2" value="Active">Active
        <input type="radio" name="r2" value="Inactive">Inactive <br><br>
    </center>
</form> -->